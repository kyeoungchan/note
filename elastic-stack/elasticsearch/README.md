# 💻 Elastic Search
> 모든 검색엔진의 시초는 루씬(Lucene)이었지만, 현재는 루씬을 기반으로 한 Elastic Search가 등장해 검색엔진 분야에서 지배적인 위치에 있다.

## ✅ Elastic Search와 RDBMS
조금 더 쉬운 개념 파악을 위해서 ES에서 사용되는 데이터 구조를 RDBM에 대응해보면 다음과 같이 매핑된다.

|ES| RDBMS    |
|---|----------|
|Index| Table    |
|Shard| Position |
|Document| Row      |
|Field| Column   |
|Mapping| Schema   |
|QueryDSL| SQL      |

> 엘라스틱서치 7.x 이전 버전에서는 타입이 존재했으므로 타입과 테이블이 매칭됐지만, 이제는 타입이 사라졌으므로 유효하지 않다.

Elastic Search는 기본적으로 HTTP 프로토콜로 접근이 가능한 REST API를 통해 데이터 조작을 지원한다.  
이를 역시 RDBMS의 SQL과 매핑해본다면 다음과 같다.

|ES HTTP Method|RDBMS SQL|
|---|---|
|GET|SELECT|
|PUT|INSERT|
|POST|UPDATE, SELECT|
|DELETE|DELETE|
|HEAD(인덱스 정보 확인)|

<br>

## ✅ 역색인
일반적인 색인의 목적은 '문서의 위치'에 대한 index를 만들어서 빠르게 그 문서에 접근하고자 하는 것인데, 역색인은 반대로 '문서 내의 문자와 같은 내용물'의 매핑 정보를 색인해놓는 것이다.  
역색인 검색엔진과 같은 문서의 내용의 검색이 필요한 형태에서 전문 검색의 형태로 주로 쓰인다.  
쉬운 예시로 들어보자면 **일반 색인(forward index)은 책의 목차**와 같은 의미이고, **역색인(inverted index)은 책 가장 뒤의 단어 별 색인 페이지**와 같다.  

## ✅ ES의 특징과 장단점
ES도 **NoSQL**의 일종으로 분류할 수 있고, **분산처리를 통해 실시간성으로 빠른 검색**이 가능하다.  
특히 기존의 데이터로 처리하기 힘든 대량의 비정형 데이터 검색이 가능하며 점문 검색(full text) 검색과 구조 검색 모두를 지원한다.  
기본적으로는 검색엔진이지만 MongoDB나 Hbase와 같은 대용량 스토리지로도 활용이 가능하다.

### 💡 장점
- **오픈소스 검색엔진**이다.   
  활발한 오픈소스 커뮤니티가 ES를 끊임없이 개선하고 발전시키고 있다.
- **전문 검색**  
  내용 전체를 색인해서 특정 단어가 포함된 문서를 검색할 수 있다.  
  기능별, 언어별 플러그인을 적용할 수 있다.
- **통계 분석**  
  비정형 로그 데이터를 수집하여 통계 분석에 활용할 수 있다.  
  Kibana를 연결하면 실시간으로 로그를 분석하고 시각화할 수 있다.
- **Schemaless**  
  정형화되지 않은 문서도 자동으로 색인하고 검색할 수 있다.
- **RESTful API**  
  HTTP 기반의 RESTful를 활용하고 요청/응답에 JSON을 사용해 개발 언어, 운영체제, 시스템에 관계없이 다양한 플랫폼에서 활용이 가능하다.
- **Multi-tenancy**  
  서로 상이한 인덱스일지라도 검색할 필드명만 같으면 여러 인덱스를 한 번에 조회할 수 있다.
- **Document-Oriented**  
  여러 계층 구조의 문서로 저장이 가능하며, 계층 구조로된 문서도 한 번의 쿼리로 조회할 수 있다.
- **역색인(Inverted Index)**
- **확장성**  
  분산 구성이 가능하다. 분산환경에서 데이터는 **shard**라는 단위로 나뉜다.

### 💡 단점
- **완전 실시간은 아니다.**  
  색인된 데이터는 1초 뒤에나 검색이 가능하다. 내부적으로 commit과 flush 같은 복접한 과정을 거치기 때문이다.
- **Transaction Rollback**을 지원하지 않는다.  
  전체적인 클러스터의 성능 향상을 위해 시스템적으로 비용 소모가 큰 롤백과 트랜잭션을 지원하지 않는다.
- **데이터의 업데이트를 제공하지 않는다.**  
  업데이트 명령이 올 경우 기존 문서를 삭제하고 새로운 문서를 생성한다.  
  업데이트에 비해 많은 비용이 들지만 이를 통해 불변성(Immutable)이라는 이점을 취한다.


<br>

**출처**  
[[Elastic Search] 기본 개념과 특징(장단점)](https://jaemunbro.medium.com/elastic-search-%EA%B8%B0%EC%B4%88-%EC%8A%A4%ED%84%B0%EB%94%94-ff01870094f0)